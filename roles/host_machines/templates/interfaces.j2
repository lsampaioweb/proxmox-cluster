# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface enp1board0 inet manual

iface enp2lacp0 inet manual

iface enp2lacp1 inet manual

iface enp2lacp2 inet manual

iface enp2lacp3 inet manual

{% if ceph_nic is defined %}
iface enp3sync0 inet manual

iface enp3sync1 inet manual
{% endif %}

iface bond0 inet manual
        bond-slaves {{ bond0_nic }}
        bond-miimon 100
        bond-mode 802.3ad
        bond-xmit-hash-policy layer2+3
        bond-min-links 1
#PVE Bond Interface.

{% if ceph_nic is defined %}
iface {{ ceph_nic }} inet manual
        bond-slaves {{ bond1_nic }}
        bond-miimon 100
        bond-mode broadcast
        bond-min-links 1
#Ceph Bond Interface.
{% endif %}

auto vmbr0
iface vmbr0 inet static
        address {{ wan_management_ip_and_netmask }}
        gateway {{ wan_management_gateway }}
        bridge-ports {{ wan_management_nic }}
        bridge-stp off
        bridge-fd 0
        bridge-vlan-aware yes
        bridge-vids 2-4094
        post-up /sbin/ethtool -s $IFACE wol g
        post-down /sbin/ethtool -s $IFACE wol g
#Wan Management Interface.

auto vmbr1
iface vmbr1 inet manual
        bridge-ports {{ lan_management_nic }}
        bridge-stp off
        bridge-fd 0
        bridge-vlan-aware yes
        bridge-vids 2-4094
#Vms Interface - VLAN[2-4094]

auto vmbr1.2
iface vmbr1.2 inet static
        address {{ lan_management_ip_and_netmask }}
#Lan Management Interface.

auto vmbr1.3
iface vmbr1.3 inet static
        address {{ cluster_ip_and_netmask }}
#Cluster Interface.

{% if ceph_nic is defined %}
auto vmbr2
iface vmbr2 inet static
        address {{ ceph_ip_and_netmask }}
        bridge-ports {{ ceph_nic }}
        bridge-stp off
        bridge-fd 0
        bridge-vlan-aware yes
        bridge-vids 2-4094
#Ceph Interface.
{% endif %}
